/*!
 * w-data-collector v1.0.18
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("path"),require("fs")):"function"==typeof define&&define.amd?define(["path","fs"],e):(t="undefined"!=typeof globalThis?globalThis:t||self)["w-data-collector"]=e(t.path,t.fs)}(this,(function(t,e){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function n(t){var e=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===r(e)?e:String(e)}function o(t,e,r){return(e=n(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function a(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var i={},c={get exports(){return i},set exports(t){i=t}};var f=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t};var l=function(t){return function(e,r,n){for(var o=-1,u=Object(e),a=n(e),i=a.length;i--;){var c=a[t?i:++o];if(!1===r(u[c],c,u))break}return e}}();var s=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n},v="object"==typeof u&&u&&u.Object===Object&&u,p=v,b="object"==typeof self&&self&&self.Object===Object&&self,y=p||b||Function("return this")(),h=y.Symbol,d=h,g=Object.prototype,j=g.hasOwnProperty,_=g.toString,m=d?d.toStringTag:void 0;var w=function(t){var e=j.call(t,m),r=t[m];try{t[m]=void 0;var n=!0}catch(t){}var o=_.call(t);return n&&(e?t[m]=r:delete t[m]),o},O=Object.prototype.toString;var S=w,A=function(t){return O.call(t)},x=h?h.toStringTag:void 0;var T=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":x&&x in Object(t)?S(t):A(t)};var P=function(t){return null!=t&&"object"==typeof t},k=T,z=P;var E=function(t){return z(t)&&"[object Arguments]"==k(t)},$=P,N=Object.prototype,F=N.hasOwnProperty,M=N.propertyIsEnumerable,B=E(function(){return arguments}())?E:function(t){return $(t)&&F.call(t,"callee")&&!M.call(t,"callee")},I=B,D=Array.isArray,C={};var R=function(){return!1};!function(t,e){var r=y,n=R,o=e&&!e.nodeType&&e,u=o&&t&&!t.nodeType&&t,a=u&&u.exports===o?r.Buffer:void 0,i=(a?a.isBuffer:void 0)||n;t.exports=i}({get exports(){return C},set exports(t){C=t}},C);var U=/^(?:0|[1-9]\d*)$/;var L=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&U.test(t))&&t>-1&&t%1==0&&t<e};var q=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},V=T,W=q,G=P,H={};H["[object Float32Array]"]=H["[object Float64Array]"]=H["[object Int8Array]"]=H["[object Int16Array]"]=H["[object Int32Array]"]=H["[object Uint8Array]"]=H["[object Uint8ClampedArray]"]=H["[object Uint16Array]"]=H["[object Uint32Array]"]=!0,H["[object Arguments]"]=H["[object Array]"]=H["[object ArrayBuffer]"]=H["[object Boolean]"]=H["[object DataView]"]=H["[object Date]"]=H["[object Error]"]=H["[object Function]"]=H["[object Map]"]=H["[object Number]"]=H["[object Object]"]=H["[object RegExp]"]=H["[object Set]"]=H["[object String]"]=H["[object WeakMap]"]=!1;var J=function(t){return G(t)&&W(t.length)&&!!H[V(t)]};var K=function(t){return function(e){return t(e)}},Q={};!function(t,e){var r=v,n=e&&!e.nodeType&&e,o=n&&t&&!t.nodeType&&t,u=o&&o.exports===n&&r.process,a=function(){try{var t=o&&o.require&&o.require("util").types;return t||u&&u.binding&&u.binding("util")}catch(t){}}();t.exports=a}({get exports(){return Q},set exports(t){Q=t}},Q);var X=J,Y=K,Z=Q&&Q.isTypedArray,tt=Z?Y(Z):X,et=s,rt=I,nt=D,ot=C,ut=L,at=tt,it=Object.prototype.hasOwnProperty;var ct=function(t,e){var r=nt(t),n=!r&&rt(t),o=!r&&!n&&ot(t),u=!r&&!n&&!o&&at(t),a=r||n||o||u,i=a?et(t.length,String):[],c=i.length;for(var f in t)!e&&!it.call(t,f)||a&&("length"==f||o&&("offset"==f||"parent"==f)||u&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||ut(f,c))||i.push(f);return i},ft=Object.prototype;var lt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ft)};var st=function(t,e){return function(r){return t(e(r))}}(Object.keys,Object),vt=lt,pt=st,bt=Object.prototype.hasOwnProperty;var yt=function(t){if(!vt(t))return pt(t);var e=[];for(var r in Object(t))bt.call(t,r)&&"constructor"!=r&&e.push(r);return e};var ht=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},dt=T,gt=ht;var jt=function(t){if(!gt(t))return!1;var e=dt(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},_t=jt,mt=q;var wt=function(t){return null!=t&&mt(t.length)&&!_t(t)},Ot=ct,St=yt,At=wt;var xt=function(t){return At(t)?Ot(t):St(t)},Tt=l,Pt=xt;var kt=wt;var zt=function(t,e){return function(r,n){if(null==r)return r;if(!kt(r))return t(r,n);for(var o=r.length,u=e?o:-1,a=Object(r);(e?u--:++u<o)&&!1!==n(a[u],u,a););return r}}((function(t,e){return t&&Tt(t,e,Pt)}));var Et=function(t){return t},$t=Et;var Nt=f,Ft=zt,Mt=function(t){return"function"==typeof t?t:$t},Bt=D;var It=function(t,e){return(Bt(t)?Nt:Ft)(t,Mt(e))};!function(t){t.exports=It}(c);var Dt=a(i),Ct=T,Rt=P;var Ut=function(t){return"symbol"==typeof t||Rt(t)&&"[object Symbol]"==Ct(t)},Lt=D,qt=Ut,Vt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Wt=/^\w*$/;var Gt,Ht=function(t,e){if(Lt(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!qt(t))||(Wt.test(t)||!Vt.test(t)||null!=e&&t in Object(e))},Jt=y["__core-js_shared__"],Kt=(Gt=/[^.]+$/.exec(Jt&&Jt.keys&&Jt.keys.IE_PROTO||""))?"Symbol(src)_1."+Gt:"";var Qt=function(t){return!!Kt&&Kt in t},Xt=Function.prototype.toString;var Yt=function(t){if(null!=t){try{return Xt.call(t)}catch(t){}try{return t+""}catch(t){}}return""},Zt=jt,te=Qt,ee=ht,re=Yt,ne=/^\[object .+?Constructor\]$/,oe=Function.prototype,ue=Object.prototype,ae=oe.toString,ie=ue.hasOwnProperty,ce=RegExp("^"+ae.call(ie).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var fe=function(t){return!(!ee(t)||te(t))&&(Zt(t)?ce:ne).test(re(t))},le=function(t,e){return null==t?void 0:t[e]};var se=function(t,e){var r=le(t,e);return fe(r)?r:void 0},ve=se(Object,"create"),pe=ve;var be=function(){this.__data__=pe?pe(null):{},this.size=0};var ye=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},he=ve,de=Object.prototype.hasOwnProperty;var ge=function(t){var e=this.__data__;if(he){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return de.call(e,t)?e[t]:void 0},je=ve,_e=Object.prototype.hasOwnProperty;var me=ve;var we=be,Oe=ye,Se=ge,Ae=function(t){var e=this.__data__;return je?void 0!==e[t]:_e.call(e,t)},xe=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=me&&void 0===e?"__lodash_hash_undefined__":e,this};function Te(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Te.prototype.clear=we,Te.prototype.delete=Oe,Te.prototype.get=Se,Te.prototype.has=Ae,Te.prototype.set=xe;var Pe=Te;var ke=function(){this.__data__=[],this.size=0};var ze=function(t,e){return t===e||t!=t&&e!=e},Ee=ze;var $e=function(t,e){for(var r=t.length;r--;)if(Ee(t[r][0],e))return r;return-1},Ne=$e,Fe=Array.prototype.splice;var Me=$e;var Be=$e;var Ie=$e;var De=ke,Ce=function(t){var e=this.__data__,r=Ne(e,t);return!(r<0)&&(r==e.length-1?e.pop():Fe.call(e,r,1),--this.size,!0)},Re=function(t){var e=this.__data__,r=Me(e,t);return r<0?void 0:e[r][1]},Ue=function(t){return Be(this.__data__,t)>-1},Le=function(t,e){var r=this.__data__,n=Ie(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function qe(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}qe.prototype.clear=De,qe.prototype.delete=Ce,qe.prototype.get=Re,qe.prototype.has=Ue,qe.prototype.set=Le;var Ve=qe,We=se(y,"Map"),Ge=Pe,He=Ve,Je=We;var Ke=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var Qe=function(t,e){var r=t.__data__;return Ke(e)?r["string"==typeof e?"string":"hash"]:r.map},Xe=Qe;var Ye=Qe;var Ze=Qe;var tr=Qe;var er=function(t,e){var r=tr(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},rr=function(){this.size=0,this.__data__={hash:new Ge,map:new(Je||He),string:new Ge}},nr=function(t){var e=Xe(this,t).delete(t);return this.size-=e?1:0,e},or=function(t){return Ye(this,t).get(t)},ur=function(t){return Ze(this,t).has(t)},ar=er;function ir(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ir.prototype.clear=rr,ir.prototype.delete=nr,ir.prototype.get=or,ir.prototype.has=ur,ir.prototype.set=ar;var cr=ir,fr=cr;function lr(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],u=r.cache;if(u.has(o))return u.get(o);var a=t.apply(this,n);return r.cache=u.set(o,a)||u,a};return r.cache=new(lr.Cache||fr),r}lr.Cache=fr;var sr=lr;var vr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pr=/\\(\\)?/g,br=function(t){var e=sr(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(vr,(function(t,r,n,o){e.push(n?o.replace(pr,"$1"):r||t)})),e}));var yr=function(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o},hr=yr,dr=D,gr=Ut,jr=h?h.prototype:void 0,_r=jr?jr.toString:void 0;var mr=function t(e){if("string"==typeof e)return e;if(dr(e))return hr(e,t)+"";if(gr(e))return _r?_r.call(e):"";var r=e+"";return"0"==r&&1/e==-Infinity?"-0":r},wr=mr;var Or=D,Sr=Ht,Ar=br,xr=function(t){return null==t?"":wr(t)};var Tr=function(t,e){return Or(t)?t:Sr(t,e)?[t]:Ar(xr(t))},Pr=Ut;var kr=function(t){if("string"==typeof t||Pr(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e},zr=Tr,Er=kr;var $r=function(t,e){for(var r=0,n=(e=zr(e,t)).length;null!=t&&r<n;)t=t[Er(e[r++])];return r&&r==n?t:void 0},Nr=$r;var Fr=function(t,e,r){var n=null==t?void 0:Nr(t,e);return void 0===n?r:n},Mr=se(y,"DataView"),Br=We,Ir=se(y,"Promise"),Dr=se(y,"Set"),Cr=se(y,"WeakMap"),Rr=T,Ur=Yt,Lr="[object Map]",qr="[object Promise]",Vr="[object Set]",Wr="[object WeakMap]",Gr="[object DataView]",Hr=Ur(Mr),Jr=Ur(Br),Kr=Ur(Ir),Qr=Ur(Dr),Xr=Ur(Cr),Yr=Rr;(Mr&&Yr(new Mr(new ArrayBuffer(1)))!=Gr||Br&&Yr(new Br)!=Lr||Ir&&Yr(Ir.resolve())!=qr||Dr&&Yr(new Dr)!=Vr||Cr&&Yr(new Cr)!=Wr)&&(Yr=function(t){var e=Rr(t),r="[object Object]"==e?t.constructor:void 0,n=r?Ur(r):"";if(n)switch(n){case Hr:return Gr;case Jr:return Lr;case Kr:return qr;case Qr:return Vr;case Xr:return Wr}return e});var Zr=Yr,tn=T,en=D,rn=P;var nn=function(t){return"string"==typeof t||!en(t)&&rn(t)&&"[object String]"==tn(t)};var on=function(t){return function(e){return null==e?void 0:e[t]}},un=on("length"),an=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var cn=function(t){return an.test(t)},fn="\\ud800-\\udfff",ln="["+fn+"]",sn="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",vn="\\ud83c[\\udffb-\\udfff]",pn="[^"+fn+"]",bn="(?:\\ud83c[\\udde6-\\uddff]){2}",yn="[\\ud800-\\udbff][\\udc00-\\udfff]",hn="(?:"+sn+"|"+vn+")"+"?",dn="[\\ufe0e\\ufe0f]?",gn=dn+hn+("(?:\\u200d(?:"+[pn,bn,yn].join("|")+")"+dn+hn+")*"),jn="(?:"+[pn+sn+"?",sn,bn,yn,ln].join("|")+")",_n=RegExp(vn+"(?="+vn+")|"+jn+gn,"g");var mn=un,wn=cn,On=function(t){for(var e=_n.lastIndex=0;_n.test(t);)++e;return e};var Sn=yt,An=Zr,xn=wt,Tn=nn,Pn=function(t){return wn(t)?On(t):mn(t)};var kn=function(t){if(null==t)return 0;if(xn(t))return Tn(t)?Pn(t):t.length;var e=An(t);return"[object Map]"==e||"[object Set]"==e?t.size:Sn(t).length};function zn(t){return"[object Object]"===Object.prototype.toString.call(t)}function En(t){return"[object String]"===Object.prototype.toString.call(t)}function $n(t){return!(!En(t)||""===t)}function Nn(t){let e=!1;return $n(t)?e=!isNaN(Number(t)):function(t){return"[object Number]"===Object.prototype.toString.call(t)}(t)&&(e=!0),e}function Fn(t){if(zn(t)){for(let e in t)return!0;return!1}return!1}function Mn(t){let e=Object.prototype.toString.call(t);return"[object Function]"===e||"[object AsyncFunction]"===e}var Bn=T,In=P;var Dn=function(t){return!0===t||!1===t||In(t)&&"[object Boolean]"==Bn(t)};function Cn(t){return Dn(t)}function Rn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Un(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Rn(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Ln=Ve;var qn=Ve,Vn=We,Wn=cr;var Gn=Ve,Hn=function(){this.__data__=new Ln,this.size=0},Jn=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},Kn=function(t){return this.__data__.get(t)},Qn=function(t){return this.__data__.has(t)},Xn=function(t,e){var r=this.__data__;if(r instanceof qn){var n=r.__data__;if(!Vn||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Wn(n)}return r.set(t,e),this.size=r.size,this};function Yn(t){var e=this.__data__=new Gn(t);this.size=e.size}Yn.prototype.clear=Hn,Yn.prototype.delete=Jn,Yn.prototype.get=Kn,Yn.prototype.has=Qn,Yn.prototype.set=Xn;var Zn=Yn;var to=cr,eo=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},ro=function(t){return this.__data__.has(t)};function no(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new to;++e<r;)this.add(t[e])}no.prototype.add=no.prototype.push=eo,no.prototype.has=ro;var oo=no,uo=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1},ao=function(t,e){return t.has(e)};var io=function(t,e,r,n,o,u){var a=1&r,i=t.length,c=e.length;if(i!=c&&!(a&&c>i))return!1;var f=u.get(t),l=u.get(e);if(f&&l)return f==e&&l==t;var s=-1,v=!0,p=2&r?new oo:void 0;for(u.set(t,e),u.set(e,t);++s<i;){var b=t[s],y=e[s];if(n)var h=a?n(y,b,s,e,t,u):n(b,y,s,t,e,u);if(void 0!==h){if(h)continue;v=!1;break}if(p){if(!uo(e,(function(t,e){if(!ao(p,e)&&(b===t||o(b,t,r,n,u)))return p.push(e)}))){v=!1;break}}else if(b!==y&&!o(b,y,r,n,u)){v=!1;break}}return u.delete(t),u.delete(e),v};var co=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r};var fo=y.Uint8Array,lo=ze,so=io,vo=co,po=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r},bo=h?h.prototype:void 0,yo=bo?bo.valueOf:void 0;var ho=function(t,e,r,n,o,u,a){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!u(new fo(t),new fo(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return lo(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var i=vo;case"[object Set]":var c=1&n;if(i||(i=po),t.size!=e.size&&!c)return!1;var f=a.get(t);if(f)return f==e;n|=2,a.set(t,e);var l=so(i(t),i(e),n,o,u,a);return a.delete(t),l;case"[object Symbol]":if(yo)return yo.call(t)==yo.call(e)}return!1};var go=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t},jo=D;var _o=function(t,e,r){var n=e(t);return jo(t)?n:go(n,r(t))};var mo=function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,u=[];++r<n;){var a=t[r];e(a,r,t)&&(u[o++]=a)}return u},wo=function(){return[]},Oo=Object.prototype.propertyIsEnumerable,So=Object.getOwnPropertySymbols,Ao=_o,xo=So?function(t){return null==t?[]:(t=Object(t),mo(So(t),(function(e){return Oo.call(t,e)})))}:wo,To=xt;var Po=function(t){return Ao(t,To,xo)},ko=Object.prototype.hasOwnProperty;var zo=Zn,Eo=io,$o=ho,No=function(t,e,r,n,o,u){var a=1&r,i=Po(t),c=i.length;if(c!=Po(e).length&&!a)return!1;for(var f=c;f--;){var l=i[f];if(!(a?l in e:ko.call(e,l)))return!1}var s=u.get(t),v=u.get(e);if(s&&v)return s==e&&v==t;var p=!0;u.set(t,e),u.set(e,t);for(var b=a;++f<c;){var y=t[l=i[f]],h=e[l];if(n)var d=a?n(h,y,l,e,t,u):n(y,h,l,t,e,u);if(!(void 0===d?y===h||o(y,h,r,n,u):d)){p=!1;break}b||(b="constructor"==l)}if(p&&!b){var g=t.constructor,j=e.constructor;g==j||!("constructor"in t)||!("constructor"in e)||"function"==typeof g&&g instanceof g&&"function"==typeof j&&j instanceof j||(p=!1)}return u.delete(t),u.delete(e),p},Fo=Zr,Mo=D,Bo=C,Io=tt,Do="[object Arguments]",Co="[object Array]",Ro="[object Object]",Uo=Object.prototype.hasOwnProperty;var Lo=function(t,e,r,n,o,u){var a=Mo(t),i=Mo(e),c=a?Co:Fo(t),f=i?Co:Fo(e),l=(c=c==Do?Ro:c)==Ro,s=(f=f==Do?Ro:f)==Ro,v=c==f;if(v&&Bo(t)){if(!Bo(e))return!1;a=!0,l=!1}if(v&&!l)return u||(u=new zo),a||Io(t)?Eo(t,e,r,n,o,u):$o(t,e,c,r,n,o,u);if(!(1&r)){var p=l&&Uo.call(t,"__wrapped__"),b=s&&Uo.call(e,"__wrapped__");if(p||b){var y=p?t.value():t,h=b?e.value():e;return u||(u=new zo),o(y,h,r,n,u)}}return!!v&&(u||(u=new zo),No(t,e,r,n,o,u))},qo=P;var Vo=function t(e,r,n,o,u){return e===r||(null==e||null==r||!qo(e)&&!qo(r)?e!=e&&r!=r:Lo(e,r,n,o,t,u))},Wo=Zn,Go=Vo;var Ho=ht;var Jo=function(t){return t==t&&!Ho(t)},Ko=Jo,Qo=xt;var Xo=function(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}},Yo=function(t,e,r,n){var o=r.length,u=o,a=!n;if(null==t)return!u;for(t=Object(t);o--;){var i=r[o];if(a&&i[2]?i[1]!==t[i[0]]:!(i[0]in t))return!1}for(;++o<u;){var c=(i=r[o])[0],f=t[c],l=i[1];if(a&&i[2]){if(void 0===f&&!(c in t))return!1}else{var s=new Wo;if(n)var v=n(f,l,c,t,e,s);if(!(void 0===v?Go(l,f,3,n,s):v))return!1}}return!0},Zo=function(t){for(var e=Qo(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,Ko(o)]}return e},tu=Xo;var eu=Tr,ru=I,nu=D,ou=L,uu=q,au=kr;var iu=function(t,e,r){for(var n=-1,o=(e=eu(e,t)).length,u=!1;++n<o;){var a=au(e[n]);if(!(u=null!=t&&r(t,a)))break;t=t[a]}return u||++n!=o?u:!!(o=null==t?0:t.length)&&uu(o)&&ou(a,o)&&(nu(t)||ru(t))},cu=function(t,e){return null!=t&&e in Object(t)},fu=iu;var lu=function(t,e){return null!=t&&fu(t,e,cu)},su=Vo,vu=Fr,pu=lu,bu=Ht,yu=Jo,hu=Xo,du=kr;var gu=function(t,e){return bu(t)&&yu(e)?hu(du(t),e):function(r){var n=vu(r,t);return void 0===n&&n===e?pu(r,t):su(e,n,3)}},ju=$r;var _u=function(t){return function(e){return ju(e,t)}},mu=on,wu=_u,Ou=Ht,Su=kr;var Au=function(t){return Ou(t)?mu(Su(t)):wu(t)},xu=function(t){var e=Zo(t);return 1==e.length&&e[0][2]?tu(e[0][0],e[0][1]):function(r){return r===t||Yo(r,t,e)}},Tu=gu,Pu=Et,ku=D,zu=Au;var Eu=zt,$u=wt;var Nu=yr,Fu=function(t){return"function"==typeof t?t:null==t?Pu:"object"==typeof t?ku(t)?Tu(t[0],t[1]):xu(t):zu(t)},Mu=function(t,e){var r=-1,n=$u(t)?Array(t.length):[];return Eu(t,(function(t,o,u){n[++r]=e(t,o,u)})),n},Bu=D;var Iu=function(t,e){return(Bu(t)?Nu:Mu)(t,Fu(e))},Du=Array.prototype.join;var Cu=function(t,e){return null==t?"":Du.call(t,e)};function Ru(t,e,r){if(!$n(t))return"";if(!$n(e))return"";if(!En(r))return"";let n=new RegExp(e,"g");return String(t).replace(n,r)}var Uu=/\s/;var Lu=function(t){for(var e=t.length;e--&&Uu.test(t.charAt(e)););return e},qu=/^\s+/;var Vu=function(t){return t?t.slice(0,Lu(t)+1).replace(qu,""):t},Wu=ht,Gu=Ut,Hu=/^[-+]0x[0-9a-f]+$/i,Ju=/^0b[01]+$/i,Ku=/^0o[0-7]+$/i,Qu=parseInt;var Xu=function(t){if("number"==typeof t)return t;if(Gu(t))return NaN;if(Wu(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Wu(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Vu(t);var r=Ju.test(t);return r||Ku.test(t)?Qu(t.slice(2),r?2:8):Hu.test(t)?NaN:+t},Yu=1/0;var Zu=function(t){return t?(t=Xu(t))===Yu||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};var ta=function(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var u=Array(o);++n<o;)u[n]=t[n+e];return u},ea=function(t){var e=Zu(t),r=e%1;return e==e?r?e-r:e:0};var ra=function(t,e,r){var n=null==t?0:t.length;return n?(e=r||void 0===e?1:ea(e),ta(t,e<0?0:e,n)):[]};function na(t,e){let r=function(){let t,e,r=new Promise((function(){t=arguments[0],e=arguments[1]}));return r.resolve=t,r.reject=e,r}();if(n=t,"[object Array]"!==Object.prototype.toString.call(n)&&!zn(t))return r.reject("rs is not an array or object"),r;var n;let o=!1;if(zn(t)){o=!0;let e=[];Dt(t,((t,r)=>{e.push({k:r,v:t})})),t=e}Mn(e)||(e=function(t){return t});let u=-1,a=[];return t.reduce((function(t,r){return t.then((function(t){a.push(t),u+=1;let n=u,i=r;return o&&(n=r.k,i=r.v),Mn(e)?e(i,n):i}))}),Promise.resolve()).then((function(t){a.push(t),a=ra(a),r.resolve(a)})).catch((function(t){r.reject(t)})),r}let oa={build:function(t){let e=Fr(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"useCreateStorage");Cn(e)||(e=!1);let{keyTable:r,tableNameCht:n,tableNameEng:o,settings:u,parser:a,funNew:i,funTest:c,ext:f}=t;if(!$n(r))throw new Error(`invalid keyTable[${r}]`);if($n(n)||(n=r),$n(o)||(o=r),!Fn(u))throw new Error("invalid settings");Fn(f)||(f=null),Fn(a)||(a=null),Mn(i)||(i=null);let l=null;Mn(c)&&(l=async t=>{if(!Fn(t))throw new Error("invalid wo");if(o=r,!zn(n=t)||!$n(o)&&!Nn(o)||!(o in n))throw console.log(t),new Error(`keyTable[${r}] is not in wo`);var n,o;let u=[];try{u=c(),function(t){let e,r=Object.prototype.toString.call(t);if(e="[object Promise]"===r,e)return!0;if("[object Function]"!==r)return!1;try{e="function"!=typeof t.subscribe&&"function"==typeof t.then}catch(t){}return e}(u)&&(u=await u)}catch(t){throw console.log(`keyTable[${r}] funTest catch`,t),new Error(t)}if(0!==kn(u))return e&&await t[r].createStorage(),await t[r].save(u),u});let s={},v={};return Dt(xt(u),(t=>{let e=Fr(u,`${t}.name`,"");$n(e)&&(s[t]=e);let r=Fr(u,`${t}.type`,"");$n(r)&&(v[t]=r)})),Un(Un({},t),{},{keyTable:r,tableNameCht:n,tableNameEng:o,settings:u,keys:xt(u),kpType:v,kpHead:s,parser:a,funNew:i,funTest:c,funTestAndSave:l,ext:f})},genIndex:function(r,n){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=Fr(o,"fpBuild");$n(u)||(u="w-data-collector/src/build.mjs");let a=Fr(o,"fnIndex");$n(a)||(a="index.mjs");let i=Fr(o,"useCreateStorage");Cn(i)||(i=!1);let c=function(r){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=1;return function r(u){let a=[],i=e.readdirSync(u);return Dt(i,(function(i){let c=t.resolve(u,i),f=null;try{f=e.statSync(c)}catch(t){}f&&f.isDirectory()?(a.push({isFolder:!0,level:o,path:c,name:t.basename(c)}),o+=1,(o<=n||null===n)&&(a=a.concat(r(c))),o-=1):a.push({isFolder:!1,level:o,path:c,name:t.basename(c)})})),a}(r)}(r),f=Iu(c,(e=>{let r=e.name;r=Ru(r,".mjs",""),r=Ru(r,".js","");let o=t.relative(n,e.path);return o=o.replace(/\\/g,"/"),o=`./${o}`,{name:r,src:o}})),l=`{cimps}\nimport build from '{fpBuild}'\n\n\nlet cs = {\n{cnms}\n}\n\n//ds\nlet ds = {}\nfor (let k in cs) {\n    ds[k] = build(cs[k], { useCreateStorage: ${i} })\n}\n\n\nexport default ds\n`,s=function(t){let e=Iu(t,(t=>{let e="import {name} from '{src}'";return e=Ru(e,"{name}",t.name),e=Ru(e,"{src}",t.src),e}));return Cu(e,"\n")}(f),v=function(t){let e=Iu(t,(t=>{let e="    {name},";return e=Ru(e,"{name}",t.name),e}));return Cu(e,"\n")}(f);l=Ru(l,"{cimps}",s),l=Ru(l,"{cnms}",v),l=Ru(l,"{fpBuild}",u);let p=t.resolve(n,a);e.writeFileSync(p,l,"utf8"),console.log("genIndex done")},genTestdata:async function(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=Fr(n,"useGenModels");Cn(o)||(o=!1),o&&(!function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Fr(r,"fdModels");$n(n)||(n=`${t.resolve()}/models`);let o=Fr(r,"genModelsByTabs");if(!Mn(o))throw new Error("opt.genModelsByTabs is not a function, it needs to import from 'w-orm-reladb/src/genModelsByTabs.mjs'");let u={};Dt(e,((t,e)=>{u[e]=t.settings})),o(n,u)}(e,n),console.log("genModels done"));let u=xt(e);await na(u,(async t=>{Mn(Fr(e,`${t}.funTestAndSave`))&&await e[t].funTestAndSave(r)})),console.log("genTestdata done",u)}};return oa}));
//# sourceMappingURL=w-data-collector.umd.js.map
