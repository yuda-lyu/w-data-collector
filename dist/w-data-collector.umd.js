/*!
 * w-data-collector v1.0.20
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("path"),require("fs")):"function"==typeof define&&define.amd?define(["path","fs"],e):(t="undefined"!=typeof globalThis?globalThis:t||self)["w-data-collector"]=e(t.path,t.fs)}(this,(function(t,e){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function n(t){var e=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===r(e)?e:String(e)}function o(t,e,r){return(e=n(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var a={},c={get exports(){return a},set exports(t){a=t}};var f=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t};var l=function(t){return function(e,r,n){for(var o=-1,u=Object(e),i=n(e),a=i.length;a--;){var c=i[t?a:++o];if(!1===r(u[c],c,u))break}return e}},s=l();var v=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n},p="object"==typeof u&&u&&u.Object===Object&&u,b=p,y="object"==typeof self&&self&&self.Object===Object&&self,d=b||y||Function("return this")(),h=d.Symbol,j=h,g=Object.prototype,_=g.hasOwnProperty,m=g.toString,O=j?j.toStringTag:void 0;var w=function(t){var e=_.call(t,O),r=t[O];try{t[O]=void 0;var n=!0}catch(t){}var o=m.call(t);return n&&(e?t[O]=r:delete t[O]),o},S=Object.prototype.toString;var A=w,x=function(t){return S.call(t)},T=h?h.toStringTag:void 0;var P=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":T&&T in Object(t)?A(t):x(t)};var k=function(t){return null!=t&&"object"==typeof t},E=P,z=k;var $=function(t){return z(t)&&"[object Arguments]"==E(t)},F=k,B=Object.prototype,N=B.hasOwnProperty,I=B.propertyIsEnumerable,M=$(function(){return arguments}())?$:function(t){return F(t)&&N.call(t,"callee")&&!I.call(t,"callee")},D=M,C=Array.isArray,U={};var L=function(){return!1};!function(t,e){var r=d,n=L,o=e&&!e.nodeType&&e,u=o&&t&&!t.nodeType&&t,i=u&&u.exports===o?r.Buffer:void 0,a=(i?i.isBuffer:void 0)||n;t.exports=a}({get exports(){return U},set exports(t){U=t}},U);var R=/^(?:0|[1-9]\d*)$/;var q=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&R.test(t))&&t>-1&&t%1==0&&t<e};var V=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},W=P,G=V,H=k,J={};J["[object Float32Array]"]=J["[object Float64Array]"]=J["[object Int8Array]"]=J["[object Int16Array]"]=J["[object Int32Array]"]=J["[object Uint8Array]"]=J["[object Uint8ClampedArray]"]=J["[object Uint16Array]"]=J["[object Uint32Array]"]=!0,J["[object Arguments]"]=J["[object Array]"]=J["[object ArrayBuffer]"]=J["[object Boolean]"]=J["[object DataView]"]=J["[object Date]"]=J["[object Error]"]=J["[object Function]"]=J["[object Map]"]=J["[object Number]"]=J["[object Object]"]=J["[object RegExp]"]=J["[object Set]"]=J["[object String]"]=J["[object WeakMap]"]=!1;var K=function(t){return H(t)&&G(t.length)&&!!J[W(t)]};var Q=function(t){return function(e){return t(e)}},X={};!function(t,e){var r=p,n=e&&!e.nodeType&&e,o=n&&t&&!t.nodeType&&t,u=o&&o.exports===n&&r.process,i=function(){try{var t=o&&o.require&&o.require("util").types;return t||u&&u.binding&&u.binding("util")}catch(t){}}();t.exports=i}({get exports(){return X},set exports(t){X=t}},X);var Y=K,Z=Q,tt=X&&X.isTypedArray,et=tt?Z(tt):Y,rt=v,nt=D,ot=C,ut=U,it=q,at=et,ct=Object.prototype.hasOwnProperty;var ft=function(t,e){var r=ot(t),n=!r&&nt(t),o=!r&&!n&&ut(t),u=!r&&!n&&!o&&at(t),i=r||n||o||u,a=i?rt(t.length,String):[],c=a.length;for(var f in t)!e&&!ct.call(t,f)||i&&("length"==f||o&&("offset"==f||"parent"==f)||u&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||it(f,c))||a.push(f);return a},lt=Object.prototype;var st=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||lt)};var vt=function(t,e){return function(r){return t(e(r))}},pt=vt(Object.keys,Object),bt=st,yt=pt,dt=Object.prototype.hasOwnProperty;var ht=function(t){if(!bt(t))return yt(t);var e=[];for(var r in Object(t))dt.call(t,r)&&"constructor"!=r&&e.push(r);return e};var jt=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},gt=P,_t=jt;var mt=function(t){if(!_t(t))return!1;var e=gt(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},Ot=mt,wt=V;var St=function(t){return null!=t&&wt(t.length)&&!Ot(t)},At=ft,xt=ht,Tt=St;var Pt=function(t){return Tt(t)?At(t):xt(t)},kt=s,Et=Pt;var zt=St;var $t=function(t,e){return function(r,n){if(null==r)return r;if(!zt(r))return t(r,n);for(var o=r.length,u=e?o:-1,i=Object(r);(e?u--:++u<o)&&!1!==n(i[u],u,i););return r}},Ft=$t((function(t,e){return t&&kt(t,e,Et)}));var Bt=function(t){return t},Nt=Bt;var It=f,Mt=Ft,Dt=function(t){return"function"==typeof t?t:Nt},Ct=C;var Ut=function(t,e){return(Ct(t)?It:Mt)(t,Dt(e))};!function(t){t.exports=Ut}(c);var Lt=i(a),Rt=P,qt=k;var Vt=function(t){return"symbol"==typeof t||qt(t)&&"[object Symbol]"==Rt(t)},Wt=C,Gt=Vt,Ht=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Jt=/^\w*$/;var Kt,Qt=function(t,e){if(Wt(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!Gt(t))||(Jt.test(t)||!Ht.test(t)||null!=e&&t in Object(e))},Xt=d["__core-js_shared__"],Yt=(Kt=/[^.]+$/.exec(Xt&&Xt.keys&&Xt.keys.IE_PROTO||""))?"Symbol(src)_1."+Kt:"";var Zt=function(t){return!!Yt&&Yt in t},te=Function.prototype.toString;var ee=function(t){if(null!=t){try{return te.call(t)}catch(t){}try{return t+""}catch(t){}}return""},re=mt,ne=Zt,oe=jt,ue=ee,ie=/^\[object .+?Constructor\]$/,ae=Function.prototype,ce=Object.prototype,fe=ae.toString,le=ce.hasOwnProperty,se=RegExp("^"+fe.call(le).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ve=function(t){return!(!oe(t)||ne(t))&&(re(t)?se:ie).test(ue(t))},pe=function(t,e){return null==t?void 0:t[e]};var be=function(t,e){var r=pe(t,e);return ve(r)?r:void 0},ye=be(Object,"create"),de=ye;var he=function(){this.__data__=de?de(null):{},this.size=0};var je=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},ge=ye,_e=Object.prototype.hasOwnProperty;var me=function(t){var e=this.__data__;if(ge){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return _e.call(e,t)?e[t]:void 0},Oe=ye,we=Object.prototype.hasOwnProperty;var Se=ye;var Ae=he,xe=je,Te=me,Pe=function(t){var e=this.__data__;return Oe?void 0!==e[t]:we.call(e,t)},ke=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Se&&void 0===e?"__lodash_hash_undefined__":e,this};function Ee(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ee.prototype.clear=Ae,Ee.prototype.delete=xe,Ee.prototype.get=Te,Ee.prototype.has=Pe,Ee.prototype.set=ke;var ze=Ee;var $e=function(){this.__data__=[],this.size=0};var Fe=function(t,e){return t===e||t!=t&&e!=e},Be=Fe;var Ne=function(t,e){for(var r=t.length;r--;)if(Be(t[r][0],e))return r;return-1},Ie=Ne,Me=Array.prototype.splice;var De=Ne;var Ce=Ne;var Ue=Ne;var Le=$e,Re=function(t){var e=this.__data__,r=Ie(e,t);return!(r<0)&&(r==e.length-1?e.pop():Me.call(e,r,1),--this.size,!0)},qe=function(t){var e=this.__data__,r=De(e,t);return r<0?void 0:e[r][1]},Ve=function(t){return Ce(this.__data__,t)>-1},We=function(t,e){var r=this.__data__,n=Ue(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function Ge(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ge.prototype.clear=Le,Ge.prototype.delete=Re,Ge.prototype.get=qe,Ge.prototype.has=Ve,Ge.prototype.set=We;var He=Ge,Je=be(d,"Map"),Ke=ze,Qe=He,Xe=Je;var Ye=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var Ze=function(t,e){var r=t.__data__;return Ye(e)?r["string"==typeof e?"string":"hash"]:r.map},tr=Ze;var er=Ze;var rr=Ze;var nr=Ze;var or=function(t,e){var r=nr(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},ur=function(){this.size=0,this.__data__={hash:new Ke,map:new(Xe||Qe),string:new Ke}},ir=function(t){var e=tr(this,t).delete(t);return this.size-=e?1:0,e},ar=function(t){return er(this,t).get(t)},cr=function(t){return rr(this,t).has(t)},fr=or;function lr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}lr.prototype.clear=ur,lr.prototype.delete=ir,lr.prototype.get=ar,lr.prototype.has=cr,lr.prototype.set=fr;var sr=lr,vr=sr;function pr(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],u=r.cache;if(u.has(o))return u.get(o);var i=t.apply(this,n);return r.cache=u.set(o,i)||u,i};return r.cache=new(pr.Cache||vr),r}pr.Cache=vr;var br=pr;var yr=function(t){var e=br(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e},dr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hr=/\\(\\)?/g,jr=yr((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(dr,(function(t,r,n,o){e.push(n?o.replace(hr,"$1"):r||t)})),e}));var gr=function(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o},_r=gr,mr=C,Or=Vt,wr=h?h.prototype:void 0,Sr=wr?wr.toString:void 0;var Ar=function t(e){if("string"==typeof e)return e;if(mr(e))return _r(e,t)+"";if(Or(e))return Sr?Sr.call(e):"";var r=e+"";return"0"==r&&1/e==-Infinity?"-0":r},xr=Ar;var Tr=C,Pr=Qt,kr=jr,Er=function(t){return null==t?"":xr(t)};var zr=function(t,e){return Tr(t)?t:Pr(t,e)?[t]:kr(Er(t))},$r=Vt;var Fr=function(t){if("string"==typeof t||$r(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e},Br=zr,Nr=Fr;var Ir=function(t,e){for(var r=0,n=(e=Br(e,t)).length;null!=t&&r<n;)t=t[Nr(e[r++])];return r&&r==n?t:void 0},Mr=Ir;var Dr=function(t,e,r){var n=null==t?void 0:Mr(t,e);return void 0===n?r:n},Cr=be(d,"DataView"),Ur=Je,Lr=be(d,"Promise"),Rr=be(d,"Set"),qr=be(d,"WeakMap"),Vr=P,Wr=ee,Gr="[object Map]",Hr="[object Promise]",Jr="[object Set]",Kr="[object WeakMap]",Qr="[object DataView]",Xr=Wr(Cr),Yr=Wr(Ur),Zr=Wr(Lr),tn=Wr(Rr),en=Wr(qr),rn=Vr;(Cr&&rn(new Cr(new ArrayBuffer(1)))!=Qr||Ur&&rn(new Ur)!=Gr||Lr&&rn(Lr.resolve())!=Hr||Rr&&rn(new Rr)!=Jr||qr&&rn(new qr)!=Kr)&&(rn=function(t){var e=Vr(t),r="[object Object]"==e?t.constructor:void 0,n=r?Wr(r):"";if(n)switch(n){case Xr:return Qr;case Yr:return Gr;case Zr:return Hr;case tn:return Jr;case en:return Kr}return e});var nn=rn,on=P,un=C,an=k;var cn=function(t){return"string"==typeof t||!un(t)&&an(t)&&"[object String]"==on(t)};var fn=function(t){return function(e){return null==e?void 0:e[t]}},ln=fn("length"),sn=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var vn=function(t){return sn.test(t)},pn="\\ud800-\\udfff",bn="["+pn+"]",yn="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",dn="\\ud83c[\\udffb-\\udfff]",hn="[^"+pn+"]",jn="(?:\\ud83c[\\udde6-\\uddff]){2}",gn="[\\ud800-\\udbff][\\udc00-\\udfff]",_n="(?:"+yn+"|"+dn+")"+"?",mn="[\\ufe0e\\ufe0f]?",On=mn+_n+("(?:\\u200d(?:"+[hn,jn,gn].join("|")+")"+mn+_n+")*"),wn="(?:"+[hn+yn+"?",yn,jn,gn,bn].join("|")+")",Sn=RegExp(dn+"(?="+dn+")|"+wn+On,"g");var An=ln,xn=vn,Tn=function(t){for(var e=Sn.lastIndex=0;Sn.test(t);)++e;return e};var Pn=ht,kn=nn,En=St,zn=cn,$n=function(t){return xn(t)?Tn(t):An(t)};var Fn=function(t){if(null==t)return 0;if(En(t))return zn(t)?$n(t):t.length;var e=kn(t);return"[object Map]"==e||"[object Set]"==e?t.size:Pn(t).length};function Bn(t){return"[object Object]"===Object.prototype.toString.call(t)}function Nn(t){return"[object String]"===Object.prototype.toString.call(t)}function In(t){return!(!Nn(t)||""===t)}function Mn(t){let e=!1;if(In(t))e=!isNaN(Number(t));else if(function(t){return"[object Number]"===Object.prototype.toString.call(t)}(t)){if(function(t){return t!=t}(t))return!1;e=!0}return e}function Dn(t){if(Bn(t)){for(let e in t)return!0;return!1}return!1}function Cn(t){let e=Object.prototype.toString.call(t);return"[object Function]"===e||"[object AsyncFunction]"===e}var Un="object"==typeof global&&global&&global.Object===Object&&global,Ln="object"==typeof self&&self&&self.Object===Object&&self,Rn=Un||Ln||Function("return this")(),qn=Rn.Symbol,Vn=Object.prototype,Wn=Vn.hasOwnProperty,Gn=Vn.toString,Hn=qn?qn.toStringTag:void 0;var Jn=Object.prototype.toString;var Kn="[object Null]",Qn="[object Undefined]",Xn=qn?qn.toStringTag:void 0;function Yn(t){return null==t?void 0===t?Qn:Kn:Xn&&Xn in Object(t)?function(t){var e=Wn.call(t,Hn),r=t[Hn];try{t[Hn]=void 0;var n=!0}catch(t){}var o=Gn.call(t);return n&&(e?t[Hn]=r:delete t[Hn]),o}(t):function(t){return Jn.call(t)}(t)}function Zn(t){return null!=t&&"object"==typeof t}var to="[object Boolean]";function eo(t){return!0===(e=t)||!1===e||Zn(e)&&Yn(e)==to;var e}function ro(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function no(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ro(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ro(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var oo=He;var uo=He,io=Je,ao=sr;var co=He,fo=function(){this.__data__=new oo,this.size=0},lo=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},so=function(t){return this.__data__.get(t)},vo=function(t){return this.__data__.has(t)},po=function(t,e){var r=this.__data__;if(r instanceof uo){var n=r.__data__;if(!io||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new ao(n)}return r.set(t,e),this.size=r.size,this};function bo(t){var e=this.__data__=new co(t);this.size=e.size}bo.prototype.clear=fo,bo.prototype.delete=lo,bo.prototype.get=so,bo.prototype.has=vo,bo.prototype.set=po;var yo=bo;var ho=sr,jo=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},go=function(t){return this.__data__.has(t)};function _o(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new ho;++e<r;)this.add(t[e])}_o.prototype.add=_o.prototype.push=jo,_o.prototype.has=go;var mo=_o,Oo=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1},wo=function(t,e){return t.has(e)};var So=function(t,e,r,n,o,u){var i=1&r,a=t.length,c=e.length;if(a!=c&&!(i&&c>a))return!1;var f=u.get(t),l=u.get(e);if(f&&l)return f==e&&l==t;var s=-1,v=!0,p=2&r?new mo:void 0;for(u.set(t,e),u.set(e,t);++s<a;){var b=t[s],y=e[s];if(n)var d=i?n(y,b,s,e,t,u):n(b,y,s,t,e,u);if(void 0!==d){if(d)continue;v=!1;break}if(p){if(!Oo(e,(function(t,e){if(!wo(p,e)&&(b===t||o(b,t,r,n,u)))return p.push(e)}))){v=!1;break}}else if(b!==y&&!o(b,y,r,n,u)){v=!1;break}}return u.delete(t),u.delete(e),v};var Ao=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r};var xo=d.Uint8Array,To=Fe,Po=So,ko=Ao,Eo=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r},zo=h?h.prototype:void 0,$o=zo?zo.valueOf:void 0;var Fo=function(t,e,r,n,o,u,i){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!u(new xo(t),new xo(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return To(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=ko;case"[object Set]":var c=1&n;if(a||(a=Eo),t.size!=e.size&&!c)return!1;var f=i.get(t);if(f)return f==e;n|=2,i.set(t,e);var l=Po(a(t),a(e),n,o,u,i);return i.delete(t),l;case"[object Symbol]":if($o)return $o.call(t)==$o.call(e)}return!1};var Bo=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t},No=C;var Io=function(t,e,r){var n=e(t);return No(t)?n:Bo(n,r(t))};var Mo=function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,u=[];++r<n;){var i=t[r];e(i,r,t)&&(u[o++]=i)}return u},Do=function(){return[]},Co=Object.prototype.propertyIsEnumerable,Uo=Object.getOwnPropertySymbols,Lo=Io,Ro=Uo?function(t){return null==t?[]:(t=Object(t),Mo(Uo(t),(function(e){return Co.call(t,e)})))}:Do,qo=Pt;var Vo=function(t){return Lo(t,qo,Ro)},Wo=Object.prototype.hasOwnProperty;var Go=yo,Ho=So,Jo=Fo,Ko=function(t,e,r,n,o,u){var i=1&r,a=Vo(t),c=a.length;if(c!=Vo(e).length&&!i)return!1;for(var f=c;f--;){var l=a[f];if(!(i?l in e:Wo.call(e,l)))return!1}var s=u.get(t),v=u.get(e);if(s&&v)return s==e&&v==t;var p=!0;u.set(t,e),u.set(e,t);for(var b=i;++f<c;){var y=t[l=a[f]],d=e[l];if(n)var h=i?n(d,y,l,e,t,u):n(y,d,l,t,e,u);if(!(void 0===h?y===d||o(y,d,r,n,u):h)){p=!1;break}b||(b="constructor"==l)}if(p&&!b){var j=t.constructor,g=e.constructor;j==g||!("constructor"in t)||!("constructor"in e)||"function"==typeof j&&j instanceof j&&"function"==typeof g&&g instanceof g||(p=!1)}return u.delete(t),u.delete(e),p},Qo=nn,Xo=C,Yo=U,Zo=et,tu="[object Arguments]",eu="[object Array]",ru="[object Object]",nu=Object.prototype.hasOwnProperty;var ou=function(t,e,r,n,o,u){var i=Xo(t),a=Xo(e),c=i?eu:Qo(t),f=a?eu:Qo(e),l=(c=c==tu?ru:c)==ru,s=(f=f==tu?ru:f)==ru,v=c==f;if(v&&Yo(t)){if(!Yo(e))return!1;i=!0,l=!1}if(v&&!l)return u||(u=new Go),i||Zo(t)?Ho(t,e,r,n,o,u):Jo(t,e,c,r,n,o,u);if(!(1&r)){var p=l&&nu.call(t,"__wrapped__"),b=s&&nu.call(e,"__wrapped__");if(p||b){var y=p?t.value():t,d=b?e.value():e;return u||(u=new Go),o(y,d,r,n,u)}}return!!v&&(u||(u=new Go),Ko(t,e,r,n,o,u))},uu=k;var iu=function t(e,r,n,o,u){return e===r||(null==e||null==r||!uu(e)&&!uu(r)?e!=e&&r!=r:ou(e,r,n,o,t,u))},au=yo,cu=iu;var fu=jt;var lu=function(t){return t==t&&!fu(t)},su=lu,vu=Pt;var pu=function(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}},bu=function(t,e,r,n){var o=r.length,u=o,i=!n;if(null==t)return!u;for(t=Object(t);o--;){var a=r[o];if(i&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<u;){var c=(a=r[o])[0],f=t[c],l=a[1];if(i&&a[2]){if(void 0===f&&!(c in t))return!1}else{var s=new au;if(n)var v=n(f,l,c,t,e,s);if(!(void 0===v?cu(l,f,3,n,s):v))return!1}}return!0},yu=function(t){for(var e=vu(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,su(o)]}return e},du=pu;var hu=zr,ju=D,gu=C,_u=q,mu=V,Ou=Fr;var wu=function(t,e,r){for(var n=-1,o=(e=hu(e,t)).length,u=!1;++n<o;){var i=Ou(e[n]);if(!(u=null!=t&&r(t,i)))break;t=t[i]}return u||++n!=o?u:!!(o=null==t?0:t.length)&&mu(o)&&_u(i,o)&&(gu(t)||ju(t))},Su=function(t,e){return null!=t&&e in Object(t)},Au=wu;var xu=function(t,e){return null!=t&&Au(t,e,Su)},Tu=iu,Pu=Dr,ku=xu,Eu=Qt,zu=lu,$u=pu,Fu=Fr;var Bu=function(t,e){return Eu(t)&&zu(e)?$u(Fu(t),e):function(r){var n=Pu(r,t);return void 0===n&&n===e?ku(r,t):Tu(e,n,3)}},Nu=Ir;var Iu=function(t){return function(e){return Nu(e,t)}},Mu=fn,Du=Iu,Cu=Qt,Uu=Fr;var Lu=function(t){return Cu(t)?Mu(Uu(t)):Du(t)},Ru=function(t){var e=yu(t);return 1==e.length&&e[0][2]?du(e[0][0],e[0][1]):function(r){return r===t||bu(r,t,e)}},qu=Bu,Vu=Bt,Wu=C,Gu=Lu;var Hu=Ft,Ju=St;var Ku=gr,Qu=function(t){return"function"==typeof t?t:null==t?Vu:"object"==typeof t?Wu(t)?qu(t[0],t[1]):Ru(t):Gu(t)},Xu=function(t,e){var r=-1,n=Ju(t)?Array(t.length):[];return Hu(t,(function(t,o,u){n[++r]=e(t,o,u)})),n},Yu=C;var Zu=function(t,e){return(Yu(t)?Ku:Xu)(t,Qu(e))},ti=Array.prototype.join;var ei=function(t,e){return null==t?"":ti.call(t,e)};function ri(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}var ni,oi=function(t,e,r){for(var n=-1,o=Object(t),u=r(t),i=u.length;i--;){var a=u[ni?i:++n];if(!1===e(o[a],a,o))break}return t};function ui(t){return Zn(t)&&"[object Arguments]"==Yn(t)}var ii=Object.prototype,ai=ii.hasOwnProperty,ci=ii.propertyIsEnumerable,fi=ui(function(){return arguments}())?ui:function(t){return Zn(t)&&ai.call(t,"callee")&&!ci.call(t,"callee")},li=fi,si=Array.isArray;var vi="object"==typeof exports&&exports&&!exports.nodeType&&exports,pi=vi&&"object"==typeof module&&module&&!module.nodeType&&module,bi=pi&&pi.exports===vi?Rn.Buffer:void 0,yi=(bi?bi.isBuffer:void 0)||function(){return!1},di=9007199254740991,hi=/^(?:0|[1-9]\d*)$/;function ji(t,e){var r=typeof t;return!!(e=null==e?di:e)&&("number"==r||"symbol"!=r&&hi.test(t))&&t>-1&&t%1==0&&t<e}var gi=9007199254740991;function _i(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=gi}var mi={};mi["[object Float32Array]"]=mi["[object Float64Array]"]=mi["[object Int8Array]"]=mi["[object Int16Array]"]=mi["[object Int32Array]"]=mi["[object Uint8Array]"]=mi["[object Uint8ClampedArray]"]=mi["[object Uint16Array]"]=mi["[object Uint32Array]"]=!0,mi["[object Arguments]"]=mi["[object Array]"]=mi["[object ArrayBuffer]"]=mi["[object Boolean]"]=mi["[object DataView]"]=mi["[object Date]"]=mi["[object Error]"]=mi["[object Function]"]=mi["[object Map]"]=mi["[object Number]"]=mi["[object Object]"]=mi["[object RegExp]"]=mi["[object Set]"]=mi["[object String]"]=mi["[object WeakMap]"]=!1;var Oi,wi="object"==typeof exports&&exports&&!exports.nodeType&&exports,Si=wi&&"object"==typeof module&&module&&!module.nodeType&&module,Ai=Si&&Si.exports===wi&&Un.process,xi=function(){try{var t=Si&&Si.require&&Si.require("util").types;return t||Ai&&Ai.binding&&Ai.binding("util")}catch(t){}}(),Ti=xi&&xi.isTypedArray,Pi=Ti?(Oi=Ti,function(t){return Oi(t)}):function(t){return Zn(t)&&_i(t.length)&&!!mi[Yn(t)]},ki=Object.prototype.hasOwnProperty;function Ei(t,e){var r=si(t),n=!r&&li(t),o=!r&&!n&&yi(t),u=!r&&!n&&!o&&Pi(t),i=r||n||o||u,a=i?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],c=a.length;for(var f in t)!e&&!ki.call(t,f)||i&&("length"==f||o&&("offset"==f||"parent"==f)||u&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||ji(f,c))||a.push(f);return a}var zi=Object.prototype;var $i=function(t,e){return function(r){return t(e(r))}}(Object.keys,Object),Fi=$i,Bi=Object.prototype.hasOwnProperty;function Ni(t){if(r=(e=t)&&e.constructor,e!==("function"==typeof r&&r.prototype||zi))return Fi(t);var e,r,n=[];for(var o in Object(t))Bi.call(t,o)&&"constructor"!=o&&n.push(o);return n}function Ii(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var Mi="[object AsyncFunction]",Di="[object Function]",Ci="[object GeneratorFunction]",Ui="[object Proxy]";function Li(t){return null!=t&&_i(t.length)&&!function(t){if(!Ii(t))return!1;var e=Yn(t);return e==Di||e==Ci||e==Mi||e==Ui}(t)}function Ri(t){return Li(t)?Ei(t):Ni(t)}var qi=function(t,e){return function(r,n){if(null==r)return r;if(!Li(r))return t(r,n);for(var o=r.length,u=e?o:-1,i=Object(r);(e?u--:++u<o)&&!1!==n(i[u],u,i););return r}}((function(t,e){return t&&oi(t,e,Ri)})),Vi=qi;function Wi(t){return t}function Gi(t,e){var r;return(si(t)?ri:Vi)(t,"function"==typeof(r=e)?r:Wi)}function Hi(t){return!!e.existsSync(t)&&(!e.lstatSync(t).isFile()&&!e.lstatSync(t).isSymbolicLink())}function Ji(t,e,r){if(!In(t))return"";if(!In(e))return"";if(!Nn(r))return"";return String(t).replaceAll(e,r)}var Ki=/\s/;var Qi=/^\s+/;function Xi(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&Ki.test(t.charAt(e)););return e}(t)+1).replace(Qi,""):t}var Yi="[object Symbol]";var Zi=NaN,ta=/^[-+]0x[0-9a-f]+$/i,ea=/^0b[01]+$/i,ra=/^0o[0-7]+$/i,na=parseInt;function oa(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||Zn(t)&&Yn(t)==Yi}(t))return Zi;if(Ii(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ii(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Xi(t);var r=ea.test(t);return r||ra.test(t)?na(t.slice(2),r?2:8):ta.test(t)?Zi:+t}var ua=1/0,ia=17976931348623157e292;function aa(t){var e=function(t){return t?(t=oa(t))===ua||t===-ua?(t<0?-1:1)*ia:t==t?t:0:0===t?t:0}(t),r=e%1;return e==e?r?e-r:e:0}function ca(t,e,r){var n=null==t?0:t.length;return n?function(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var u=Array(o);++n<o;)u[n]=t[n+e];return u}(t,(e=r||void 0===e?1:aa(e))<0?0:e,n):[]}function fa(t,e){let r=function(){let t,e,r=new Promise((function(){t=arguments[0],e=arguments[1]}));return r.resolve=t,r.reject=e,r}();if(n=t,"[object Array]"!==Object.prototype.toString.call(n)&&!Bn(t))return r.reject("rs is not an array or object"),r;var n;let o=!1;if(Bn(t)){o=!0;let e=[];Gi(t,((t,r)=>{e.push({k:r,v:t})})),t=e}Cn(e)||(e=function(t){return t});let u=-1,i=[];return t.reduce((function(t,r){return t.then((function(t){i.push(t),u+=1;let n=u,a=r;return o&&(n=r.k,a=r.v),Cn(e)?e(a,n):a}))}),Promise.resolve()).then((function(t){i.push(t),i=ca(i),r.resolve(i)})).catch((function(t){r.reject(t)})),r}let la={build:function(t){let e=Dr(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"useCreateStorage");eo(e)||(e=!1);let{keyTable:r,tableNameCht:n,tableNameEng:o,settings:u,parser:i,funNew:a,funTest:c,ext:f}=t;if(!In(r))throw new Error(`invalid keyTable[${r}]`);if(In(n)||(n=r),In(o)||(o=r),!Dn(u))throw new Error("invalid settings");Dn(f)||(f=null),Dn(i)||(i=null),Cn(a)||(a=null);let l=null;Cn(c)&&(l=async t=>{if(!Dn(t))throw new Error("invalid wo");if(o=r,!Bn(n=t)||!In(o)&&!Mn(o)||!(o in n))throw console.log(t),new Error(`keyTable[${r}] is not in wo`);var n,o;let u=[];try{u=c(),function(t){let e,r=Object.prototype.toString.call(t);if(e="[object Promise]"===r,e)return!0;if("[object Function]"!==r)return!1;try{e="function"!=typeof t.subscribe&&"function"==typeof t.then}catch(t){}return e}(u)&&(u=await u)}catch(t){throw console.log(`keyTable[${r}] funTest catch`,t),new Error(t)}if(0!==Fn(u))return e&&await t[r].createStorage(),await t[r].save(u),u});let s={},v={};return Lt(Pt(u),(t=>{let e=Dr(u,`${t}.name`,"");In(e)&&(s[t]=e);let r=Dr(u,`${t}.type`,"");In(r)&&(v[t]=r)})),no(no({},t),{},{keyTable:r,tableNameCht:n,tableNameEng:o,settings:u,keys:Pt(u),kpType:v,kpHead:s,parser:i,funNew:a,funTest:c,funTestAndSave:l,ext:f})},genIndex:function(r,n){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=Dr(o,"fpBuild");In(u)||(u="w-data-collector/src/build.mjs");let i=Dr(o,"fnIndex");In(i)||(i="index.mjs");let a=Dr(o,"useCreateStorage");eo(a)||(a=!1);let c=function(r){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=1;if(!Hi(r))throw new Error(`fd[${r}] is not a folder`);return function r(u){let i=[];return Hi(u)?(Gi(e.readdirSync(u),(function(a){let c=t.resolve(u,a),f=null;try{f=e.statSync(c)}catch(t){}f&&f.isDirectory()?(i.push({isFolder:!0,level:o,path:c,name:t.basename(c)}),o+=1,(o<=n||null===n)&&(i=i.concat(r(c))),o-=1):i.push({isFolder:!1,level:o,path:c,name:t.basename(c)})})),i):i}(r)}(r),f=Zu(c,(e=>{let r=e.name;r=Ji(r,".mjs",""),r=Ji(r,".js","");let o=t.relative(n,e.path);return o=o.replace(/\\/g,"/"),o=`./${o}`,{name:r,src:o}})),l=`{cimps}\nimport build from '{fpBuild}'\n\n\nlet cs = {\n{cnms}\n}\n\n//ds\nlet ds = {}\nfor (let k in cs) {\n    ds[k] = build(cs[k], { useCreateStorage: ${a} })\n}\n\n\nexport default ds\n`,s=function(t){let e=Zu(t,(t=>{let e="import {name} from '{src}'";return e=Ji(e,"{name}",t.name),e=Ji(e,"{src}",t.src),e}));return ei(e,"\n")}(f),v=function(t){let e=Zu(t,(t=>{let e="    {name},";return e=Ji(e,"{name}",t.name),e}));return ei(e,"\n")}(f);l=Ji(l,"{cimps}",s),l=Ji(l,"{cnms}",v),l=Ji(l,"{fpBuild}",u);let p=t.resolve(n,i);e.writeFileSync(p,l,"utf8"),console.log("genIndex done")},genTestdata:async function(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=Dr(n,"useGenModels");eo(o)||(o=!1),o&&(!function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Dr(r,"fdModels");In(n)||(n=`${t.resolve()}/models`);let o=Dr(r,"genModelsByTabs");if(!Cn(o))throw new Error("opt.genModelsByTabs is not a function, it needs to import from 'w-orm-reladb/src/genModelsByTabs.mjs'");let u={};Lt(e,((t,e)=>{u[e]=t.settings})),o(n,u)}(e,n),console.log("genModels done"));let u=Pt(e);await fa(u,(async t=>{Cn(Dr(e,`${t}.funTestAndSave`))&&await e[t].funTestAndSave(r)})),console.log("genTestdata done",u)}};return la}));
//# sourceMappingURL=w-data-collector.umd.js.map
